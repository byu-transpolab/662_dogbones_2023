---
title: "Redesign of the I-15 Interchange at Main Street in Payson, Utah"
metadata-files:
  - _info.yml
format: pdf
---

```{r}
#| label: setup
#| include: false

library(tidyverse)
library(kableExtra)

format_los_comp_kbl <- function(los_comp) {
  los_comp %>%
  mutate(Intersection = ifelse(
    Intersection == "SB Interchange",
    "SB Interchange*",
    Intersection
  )) %>% 
  kbl(align = "c", booktabs = TRUE, linesep = "") %>% 
  kable_styling(latex_options = "scale_down") %>% 
  column_spec(column = 4:ncol(ex_build_am_los_comp_formatted), width = "3cm") %>% 
  collapse_rows(columns = c(1,2), valign = "middle", target = 1) %>% 
  footnote(symbol = "This intersection was signalized in the existing model, but is unsignalized in the build model.")
}
```

A potential redesign of the I-15 interchange at Main Street in Payson, Utah was tested using a Vissim model.
This redesign is a "dogbone" interchange where the North and South intersections are roundabouts. 
This document outlines the study parameters, model setup and results from the potential dogbone interchange analysis. 

<!-- The Main Street interchange is one of two interchanges serving the city of Payson. It connects I-15 to Main Street, which is classified as a minor arterial [@FuncClass] and carries an Annual Average Daily Traffic (AADT) of 15,000 veh per day [@AADT]. Due to growth and increased travel in the area, the interchange is being investigated for a potential redesign to better serve the Payson and nearby Benjamin, Utah communities. UDOT prepared an Environmental Impact Statement in 2019 for the interchange and proposed a series of braided ramps to connect the existing interchange to the proposed Nebo Beltway, just northeast of Main Street [@UDOTStudy]. This study will provide a second evaluation of the existing conditions and potential redesign options for the interchange. @fig-study-area shows imagery of the study area. -->

<!-- ![I-15 interchange at Main Street in Payson, Utah. @Google](figures/study_area.png){#fig-study-area fig-pos=H height="2.5in"} -->

# Model Setup



# Results

<!-- Tables [-@tbl-am-los] and [-@tbl-pm-los] display the results of the analysis performed in the VISSIM model for both the A.M. and P.M. peak periods. Level of Service was determined from the Highway Capacity Manual 7^th^ edition [@hcm7]. Each of the approaches are performing relatively well under the existing conditions. Points of concern are approaches with a single lane that service all vehicle movements. The approaches include the 900 N and I-15 NB Off-ramp with LOS C. With additional loading, it is likely that the network could see considerable reductions in service capabilities. -->


```{r}
#| label: tbl-am-los-comp
#| tbl-cap: Comparison of LOS Results (AM)

targets::tar_load(ex_build_am_los_comp_formatted)

ex_build_am_los_comp_formatted %>% format_los_comp_kbl()
```

```{r}
#| label: tbl-pm-los-comp
#| tbl-cap: Comparison of LOS Results (PM)

targets::tar_load(ex_build_pm_los_comp_formatted)

ex_build_pm_los_comp_formatted %>% format_los_comp_kbl()
```

```{r}
#| label: fig-tt
#| fig-cap: Travel time comparison between existing and build models.

targets::tar_load(ex_am_traveltimes_formatted)
targets::tar_load(build_am_traveltimes_formatted)
targets::tar_load(ex_pm_traveltimes_formatted)
targets::tar_load(build_pm_traveltimes_formatted)

ex_am_traveltimes_formatted <- ex_am_traveltimes_formatted %>% mutate(Model = "Existing", Label = paste0(Movement," (AM)"))
build_am_traveltimes_formatted <- build_am_traveltimes_formatted %>% mutate(Model = "Build", Label = paste0(Movement," (AM)"))
ex_pm_traveltimes_formatted <- ex_pm_traveltimes_formatted %>% mutate(Model = "Existing", Label = paste0(Movement," (PM)"))
build_pm_traveltimes_formatted <- build_pm_traveltimes_formatted %>% mutate(Model = "Build", Label = paste0(Movement," (PM)"))

tt <- rbind(ex_am_traveltimes_formatted, build_am_traveltimes_formatted, ex_pm_traveltimes_formatted, build_pm_traveltimes_formatted) %>%
  select(Model, Movement, Label, TT = `Average Travel Time (sec)`, Distance = `Average Distance Traveled (ft)`) %>%
  arrange(Label)

tt$cont_y <- c(1, 1, 2, 2, 4, 4, 5, 5, 7, 7, 8, 8, 10, 10, 11, 11, 13, 13, 14, 14, 16, 16, 17, 17)

ggplot(tt) +
  geom_line(data = tt %>% filter(cont_y == 1), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 2), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 4), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 5), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 7), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 8), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 10), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 11), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 13), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 14), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 16), aes(x = TT, y = cont_y), color = "red") +
  geom_line(data = tt %>% filter(cont_y == 17), aes(x = TT, y = cont_y), color = "red") +
  geom_point(aes(x = TT, y = cont_y, color = Model), size = 3.5) +
  theme_bw() +
  labs(x = "Travel Time (Seconds)",
       y = "Movement (Time of Day)") +
   scale_y_continuous(breaks = c(1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17), 
                      labels = unique(tt$Label)) +
  scale_color_manual(values = c("Build" = "blue", "Existing" = "red")) +
  scale_x_continuous(breaks = seq(10,100,10), limits = c(0,NA), expand = expansion(mult = c(0,0.05))) +
  theme(panel.grid.major.y = element_blank(),
        panel.grid.minor.y = element_blank())

```


{{< pagebreak >}}

# References

::: {#refs}
:::



